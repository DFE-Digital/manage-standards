{% extends "layouts/layout.html" %}

{% set selectedNav = "Create" %}
{% set pageName = "Tasks" %}
{% set seoPageName = "" %}
{% set pageDescription = ""%}

{% set view = "standard" %}

{% block hero %}
    {% include './_head.html' %}
{% endblock %}

{% block content %}
    <div class="govuk-width-container ">
        <div class="govuk-grid-row">

            <div class="govuk-grid-column-three-quarters">
                <h2 class="govuk-heading-l">Tasks</h2>

                <ul class="govuk-task-list">
                    <li class="govuk-task-list__item govuk-task-list__item--with-link">
                        <div class="govuk-task-list__name-and-hint">
                            <a class="govuk-link govuk-task-list__link" href="/create/title" aria-describedby="standard-details-1-status">
        Standard title
      </a>
                        </div>
                        <div class="govuk-task-list__status" id="standard-details-1-status">
                            {% if standard.title %}
                        Complete
                        {% else %}
                                <strong class="govuk-tag govuk-tag--blue">Incomplete</strong>
                            {% endif %}
                        </div>
                    </li>
                    <li class="govuk-task-list__item govuk-task-list__item--with-link">
                        <div class="govuk-task-list__name-and-hint">
                            <a class="govuk-link govuk-task-list__link" href="/create/summary" aria-describedby="standard-details-4-summary">
        Summary
      </a>
                        </div>
                        <div class="govuk-task-list__status" id="standard-details-4-summary">
                            {% if standard.title %}
                                {% if standard.summary %}
                                Complete
                            {% else %}
                                    <strong class="govuk-tag govuk-tag--blue">Incomplete</strong>
                                {% endif %}
                            {% else %}
                                <strong class="govuk-tag govuk-tag--grey">Cannot start yet</strong>
                            {% endif %}
                        </div>
                    </li>
                    <li class="govuk-task-list__item govuk-task-list__item--with-link">
                        <div class="govuk-task-list__name-and-hint">
                            <a class="govuk-link govuk-task-list__link" href="/create/categories" aria-describedby="standard-details-2-status">
        Categories
      </a>
                        </div>
                        <div class="govuk-task-list__status" id="standard-details-2-status">

                            {% if standard.title %}
                                {% if standard.categories.length %}
                                Complete
                            {% else %}
                                    <strong class="govuk-tag govuk-tag--blue">Incomplete</strong>
                                {% endif %}
                            {% else %}
                                <strong class="govuk-tag govuk-tag--grey">Cannot start yet</strong>
                            {% endif %}

                        </div>

                    </li>
                    <li class="govuk-task-list__item govuk-task-list__item--with-link">
                        <div class="govuk-task-list__name-and-hint">
                            <a class="govuk-link govuk-task-list__link" href="/create/sub-categories" aria-describedby="standard-details-3-hint standard-details-3-status">
        Sub-categories
      </a>
                        </div>
                        <div class="govuk-task-list__status" id="standard-details-3-status">
                            {% if standard.title %}
                                {% if standard.sub_categories.length %}
                                Complete
                                {% else %}
                                    {% if standard.categories.length %}
                                        <strong class="govuk-tag govuk-tag--blue">Incomplete</strong>
                                    {% else %}
                                        <strong class="govuk-tag govuk-tag--grey">Cannot start yet</strong>
                                    {% endif %}
                                {% endif %}
                            {% else %}
                                <strong class="govuk-tag govuk-tag--grey">Cannot start yet</strong>
                            {% endif %}
                        </div>
                    </li>
                    <li class="govuk-task-list__item govuk-task-list__item--with-link">
                        <div class="govuk-task-list__name-and-hint">
                            <a class="govuk-link govuk-task-list__link" href="/create/purpose" aria-describedby="standard-details-4-status">
        Purpose
      </a>
                        </div>
                        <div class="govuk-task-list__status" id="standard-details-4-status">
                            {% if standard.title %}
                                {% if standard.purpose %}
                                Complete
                            {% else %}
                                    <strong class="govuk-tag govuk-tag--blue">Incomplete</strong>
                                {% endif %}
                            {% else %}
                                <strong class="govuk-tag govuk-tag--grey">Cannot start yet</strong>
                            {% endif %}
                        </div>
                    </li>
                    <li class="govuk-task-list__item govuk-task-list__item--with-link">
                        <div class="govuk-task-list__name-and-hint">
                            <a class="govuk-link govuk-task-list__link" href="/create/how-to-meet" aria-describedby="standard-details-4-status">
        How to meet the standard
      </a>
                        </div>
                        <div class="govuk-task-list__status" id="standard-details-4-status">
                            {% if standard.title %}
                                {% if standard.howToMeet %}
                                Complete
                            {% else %}
                                    <strong class="govuk-tag govuk-tag--blue">Incomplete</strong>
                                {% endif %}
                            {% else %}
                                <strong class="govuk-tag govuk-tag--grey">Cannot start yet</strong>
                            {% endif %}
                        </div>
                    </li>
                    <li class="govuk-task-list__item govuk-task-list__item--with-link">
                        <div class="govuk-task-list__name-and-hint">
                            <a class="govuk-link govuk-task-list__link" href="/create/products" aria-describedby="standard-details-5-status">
        Approved or tolerated products
      </a>
                        </div>
                        <div class="govuk-task-list__status" id="standard-details-5-status">
                            {% if standard.title %}

                                {% if standard.approvedProducts.length or standard.toleratedProducts.length %}

                                    {% set number = standard.approvedProducts | length + standard.toleratedProducts | length %}

                                    {{ number }} product{% if number !== 1 %}s{% endif %}
                                {% else %}
                                    <strong class="govuk-tag govuk-tag--blue">Optional</strong>
                                {% endif %}
                            {% else %}
                                <strong class="govuk-tag govuk-tag--grey">Cannot start yet</strong>
                            {% endif %}
                        </div>
                    </li>
                    <li class="govuk-task-list__item govuk-task-list__item--with-link">
                        <div class="govuk-task-list__name-and-hint">
                            <a class="govuk-link govuk-task-list__link" href="/create/exceptions" aria-describedby="standard-details-5-status">
        Exceptions
      </a>
                        </div>
                        <div class="govuk-task-list__status" id="standard-details-5-status">
                            {% if standard.title %}
                                {% if standard.exceptions %}

                                    {{ standard.exceptions | length }} exception{% if standard.exceptions | length !== 1 %}s{% endif %}
                                {% else %}
                                    <strong class="govuk-tag govuk-tag--blue">Optional</strong>
                                {% endif %}
                            {% else %}
                                <strong class="govuk-tag govuk-tag--grey">Cannot start yet</strong>
                            {% endif %}
                        </div>
                    </li>
                    <li class="govuk-task-list__item govuk-task-list__item--with-link">
                        <div class="govuk-task-list__name-and-hint">
                            <a class="govuk-link govuk-task-list__link" href="/create/people" aria-describedby="standard-details-5-status">
        Owner and contacts
      </a>
                        </div>
                        <div class="govuk-task-list__status" id="standard-details-5-status">
                            {% if standard.title %}
                                {% if standard.owners or standard.contacts %}

                                    {% set number = standard.owners.length + standard.contacts.length %}

                                    {{ number }}
                                    {% if number !== 1 %}people{% else%}person{% endif %}

                                {% else %}
                                    <strong class="govuk-tag govuk-tag--blue">Incomplete</strong>
                                {% endif %}
                            {% else %}
                                <strong class="govuk-tag govuk-tag--grey">Cannot start yet</strong>
                            {% endif %}
                        </div>

                    </li>

                    <li class="govuk-task-list__item govuk-task-list__item--with-link">
                        <div class="govuk-task-list__name-and-hint">
                            <a class="govuk-link govuk-task-list__link" href="/create/validity" aria-describedby="standard-details-5-status">
       Validity
      </a>
                        </div>
                        <div class="govuk-task-list__status" id="standard-details-5-status">
                            {% if standard.title %}
                                {% if standard.validityPeriod %}
Complete
                            {% else %}
                                    <strong class="govuk-tag govuk-tag--blue">Incomplete</strong>
                                {% endif %}
                            {% else %}
                                <strong class="govuk-tag govuk-tag--grey">Cannot start yet</strong>
                            {% endif %}
                        </div>

                    </li>
                    <li class="govuk-task-list__item govuk-task-list__item--with-link">
                        <div class="govuk-task-list__name-and-hint">
                            <a class="govuk-link govuk-task-list__link" href="/create/governance" aria-describedby="standard-details-5-status">
       Governance
      </a>
                        </div>
                        <div class="govuk-task-list__status" id="standard-details-5-status">
                            {% if standard.title %}
                                {% if standard.governance %}
Complete
                            {% else %}
                                    <strong class="govuk-tag govuk-tag--blue">Incomplete</strong>
                                {% endif %}
                            {% else %}
                                <strong class="govuk-tag govuk-tag--grey">Cannot start yet</strong>
                            {% endif %}
                        </div>

                    </li>
                    <li class="govuk-task-list__item govuk-task-list__item--with-link">
                        <div class="govuk-task-list__name-and-hint">
                            <a class="govuk-link govuk-task-list__link" href="/create/legality" aria-describedby="standard-details-5-status">
       Legality
      </a>
                        </div>
                        <div class="govuk-task-list__status" id="standard-details-5-status">
                            {% if standard.title %}
                                {% if standard.legalStandard !== null %}
Complete
                          
                            {% else %}
                                    <strong class="govuk-tag govuk-tag--blue">Incomplete</strong>
                                {% endif %}
                            {% else %}
                                <strong class="govuk-tag govuk-tag--grey">Cannot start yet</strong>
                            {% endif %}
                        </div>

                    </li>
                </ul>

                {% set isSubmittable = false %}

                {% if standard.title and standard.summary and standard.purpose and standard.howToMeet and standard.categories and standard.sub_categories and standard.owners and standard.governance and standard.validityPeriod and standard.legalStandard.length %}

                    {% set isSubmittable = true %}

                {% endif %}

                {% if isSubmittable %}

                    <h2 class="govuk-heading-l">Submit draft for review</h2>

                    <p class="govuk-body">You have completed all the required information for the standard forums to review this standard.</p>

                    <h3 class="govuk-heading-m">Before you submit</h3>

                    <p class="govuk-body">Make sure you have:</p>

                    <ul class="govuk-list govuk-list--bullet">
                        <li>checked the content is written using plain English and plain language</li>
                        <li>spelt out any acronyms, abbreviations, and initialisms in full</li>
                        <li>checked any links to external content are working</li>
                        <li>use the <a href="/create/preview/{{standard.documentId}}" class="govuk-link govuk-link--no-visited-state" target="_blank">preview option</a> to check how the standard will look when published </li>
                    </ul>

                    <p>When you submit the draft, you'll be contacted by the standards forum for the review stage.</p>

                {% else %}
                    <h2 class="govuk-heading-l">You cannot submit this draft</h2>
                    <p class="govuk-body">You need to complete all the required tasks before you can submit this standard for review.</p>

                {% endif %}

                <form action="/create/standard/submit" method="post">
                    {% if isSubmittable %}
                        <button type="submit" name="action" value="Submit" class="govuk-button" data-module="govuk-button">
                    Submit for review
                </button>
                    {% endif %}

                    <h2 class="govuk-heading-l">Delete draft</h2>
                    <p class="govuk-body">If you no longer need this draft, you can delete it.</p>
                    <button type="submit"  name="action" value="Delete" class="govuk-button govuk-button--secondary" data-module="govuk-button">
                    Delete draft standard
                </button>

                </form>

            </div>

            <div class="govuk-grid-column-one-quarter">
                <aside class="dfe-aside">
                    <h2 class="govuk-heading-m">Preview standard</h2>

                    <p class="govuk-body">
                        <a href="/create/preview/{{standard.documentId}}" class="govuk-link govuk-link--no-visited-state" target="_blank">Open preview in a new tab</a>
                    </p>

                    <p class="govuk-body">You can share the draft standard with others. Only users with access to this service and the link, can preview this standard.</p>

                    <p class="govuk-body">You will not be able to share this standard publicly.</p>

                </div>
            </div>
        </div>
    {% endblock %}